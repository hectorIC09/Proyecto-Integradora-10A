<!doctype html>
<html lang="es">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Campus Watch | Iniciar Sesión</title><!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .animate-float {
      animation: float 6s ease-in-out infinite;
    }

    .animate-fadeIn {
      animation: fadeIn 0.5s ease-out forwards;
    }

    .glass-effect {
      background: rgba(30, 41, 59, 0.7);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }

    .input-focus-effect:focus-within {
      background: rgba(51, 65, 85, 0.9);
      border-color: rgba(59, 130, 246, 0.7);
    }
  </style>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            inter: ['Inter', '-apple-system', 'BlinkMacSystemFont', 'system-ui', 'sans-serif'],
          },
          colors: {
            navyBg: '#0f172a',
            navyCard: '#1e293b',
            navyInput: '#334155',
            bluePrimary: '#3b82f6',
            bluePrimaryHover: '#2563eb',
            errorText: '#f87171',
            successText: '#34d399',
          }
        }
      }
    }
  </script>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="m-0 min-h-full h-full flex items-center justify-center bg-navyBg font-inter text-white overflow-hidden relative"><!-- Elementos decorativos de fondo -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
   <div class="absolute top-20 left-10 w-72 h-72 bg-bluePrimary/20 rounded-full blur-3xl animate-float"></div>
   <div class="absolute bottom-20 right-10 w-96 h-96 bg-bluePrimary/15 rounded-full blur-3xl animate-float" style="animation-delay: 2s;"></div>
   <div class="absolute top-1/2 left-1/2 w-80 h-80 bg-bluePrimary/10 rounded-full blur-3xl animate-float" style="animation-delay: 4s;"></div>
  </div>
  <div class="w-full h-full flex items-center justify-center px-4 py-6 relative z-10">
   <main class="w-full max-w-md glass-effect rounded-3xl shadow-2xl border border-white/10 
             px-8 py-10 flex flex-col gap-8 animate-fadeIn" aria-labelledby="form-title"><!-- Encabezado minimalista -->
    <header class="flex flex-col items-center gap-4"><!-- Logo minimalista -->
     <div class="relative">
      <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-bluePrimary to-bluePrimaryHover 
                      flex items-center justify-center shadow-lg shadow-bluePrimary/50 
                      transform transition-transform hover:scale-105">
       <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-8 h-8 text-white"><path fill="currentColor" d="M12 2 4 5v6c0 5 3.4 9.4 8 11 4.6-1.6 8-6 8-11V5l-8-3z" />
       </svg>
      </div>
      <div class="absolute -inset-1 bg-gradient-to-br from-bluePrimary to-bluePrimaryHover rounded-2xl blur opacity-30 -z-10"></div>
     </div>
     <div class="text-center">
      <h1 id="form-title" class="text-2xl font-bold tracking-tight bg-gradient-to-r from-white to-slate-200 bg-clip-text text-transparent">Iniciar Sesión</h1>
      <p class="mt-2 text-sm text-slate-400 font-light">Bienvenido a <span class="font-semibold text-bluePrimary">Campus Watch</span></p>
     </div>
    </header><!-- Formulario de Login -->
    <form id="login-form" class="flex flex-col gap-5">
     <div class="flex flex-col gap-4">
      <div class="text-left"><label for="email" class="block text-xs font-medium text-slate-300 mb-2 uppercase tracking-wider"> Correo Electronico </label>
       <div class="flex items-center gap-3 bg-white/5 rounded-2xl px-4 py-3.5 
                     border border-white/10 input-focus-effect
                     transition-all duration-300 hover:border-blue-400/50">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-5 h-5 text-slate-400"><path fill="currentColor" d="M4 4h16a2 2 0 0 1 2 2v1.2l-10 5.6-10-5.6V6a2 2 0 0 1 2-2zm-2 6.3V18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-7.7l-10 5.6-10-5.6z" />
        </svg><input type="email" id="email" placeholder="tu@correo.com" class="w-full bg-transparent border-none outline-none text-sm text-white
                       placeholder:text-slate-500" autocomplete="email" required>
       </div>
      </div>
      <div class="text-left"><label for="password" class="block text-xs font-medium text-slate-300 mb-2 uppercase tracking-wider"> Contraseña </label>
       <div class="flex items-center gap-3 bg-white/5 rounded-2xl px-4 py-3.5 
                     border border-white/10 input-focus-effect
                     transition-all duration-300 hover:border-blue-400/50">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-5 h-5 text-slate-400"><path fill="currentColor" d="M12 2C9.24 2 7 4.24 7 7v3H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V12c0-1.1-.9-2-2-2h-1V7c0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3v3H9V7c0-1.66 1.34-3 3-3z" />
        </svg><input type="password" id="password" placeholder="••••••••" class="w-full bg-transparent border-none outline-none text-sm text-white
                       placeholder:text-slate-500" autocomplete="current-password" required>
       </div>
      </div>
     </div>
     <p id="msg" class="min-h-[1rem] text-xs text-errorText text-center font-medium"></p><button type="submit" class="w-full relative overflow-hidden group
                 bg-gradient-to-r from-bluePrimary to-bluePrimaryHover 
                 hover:from-bluePrimaryHover hover:to-bluePrimary
                 text-white font-semibold text-sm 
                 rounded-2xl px-6 py-4
                 transition-all duration-300 
                 shadow-lg shadow-bluePrimary/30 hover:shadow-bluePrimary/50
                 transform hover:scale-[1.02] active:scale-[0.98]
                 focus-visible:outline-none focus-visible:ring-2 
                 focus-visible:ring-bluePrimary focus-visible:ring-offset-2 
                 focus-visible:ring-offset-navyBg"> <span class="relative z-10 flex items-center justify-center gap-2"> Iniciar sesión 
       <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-4 h-4 group-hover:translate-x-1 transition-transform"><path fill="currentColor" d="M13 4v4h-2V6H5v12h6v-2h2v4H3V4h10zm8 8-5 5v-3h-6v-4h6V7l5 5z" />
       </svg></span>
      <div class="absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 
                      translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"></div></button>
     <div class="flex flex-col gap-3 text-center">
      <p class="text-xs text-slate-400">¿No tienes cuenta? <a href="#" id="show-register" class="text-bluePrimary hover:text-bluePrimaryHover font-semibold ml-1 transition-colors"> Regístrate </a></p>
      <div class="relative">
       <div class="absolute inset-0 flex items-center">
        <div class="w-full border-t border-white/10"></div>
       </div>
       <div class="relative flex justify-center text-xs"><span class="px-3 bg-transparent text-slate-500">o</span>
       </div>
      </div><a href="alumno-login.html" class="inline-flex items-center justify-center gap-2 
                    text-xs font-medium text-slate-300 hover:text-white
                    bg-white/5 hover:bg-white/10 
                    border border-white/10 hover:border-white/20
                    rounded-xl px-4 py-3
                    transition-all duration-300">
       <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-4 h-4"><path fill="currentColor" d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
       </svg> Acceso para alumnos </a>
     </div>
    </form><!-- Formulario de Registro (oculto por defecto) -->
    <form id="register-form" class="hidden flex-col gap-5">
     <div class="flex flex-col gap-4">
      <div class="text-left"><label for="rname" class="block text-xs font-medium text-slate-300 mb-2 uppercase tracking-wider"> Nombre Completo </label>
       <div class="flex items-center gap-3 bg-navyInput/50 rounded-2xl px-4 py-3.5 
                     border border-white/10 input-focus-effect
                     transition-all duration-300 hover:border-bluePrimary/50">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-5 h-5 text-slate-400"><path fill="currentColor" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
        </svg><input type="text" id="rname" placeholder="Tu Nombre" class="w-full bg-transparent border-none outline-none text-sm text-white
                       placeholder:text-slate-500" autocomplete="name" required>
       </div>
      </div>
      <div class="text-left"><label for="remail" class="block text-xs font-medium text-slate-300 mb-2 uppercase tracking-wider"> Correo Electrónico </label>
       <div class="flex items-center gap-3 bg-navyInput/50 rounded-2xl px-4 py-3.5 
                     border border-white/10 input-focus-effect
                     transition-all duration-300 hover:border-bluePrimary/50">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-5 h-5 text-slate-400"><path fill="currentColor" d="M4 4h16a2 2 0 0 1 2 2v1.2l-10 5.6-10-5.6V6a2 2 0 0 1 2-2zm-2 6.3V18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-7.7l-10 5.6-10-5.6z" />
        </svg><input type="email" id="remail" placeholder="tu@correo.com" class="w-full bg-transparent border-none outline-none text-sm text-white
                       placeholder:text-slate-500" autocomplete="email" required>
       </div>
      </div>
      <div class="text-left"><label for="rpassword" class="block text-xs font-medium text-slate-300 mb-2 uppercase tracking-wider"> Contraseña </label>
       <div class="flex items-center gap-3 bg-navyInput/50 rounded-2xl px-4 py-3.5 
                     border border-white/10 input-focus-effect
                     transition-all duration-300 hover:border-bluePrimary/50">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-5 h-5 text-slate-400"><path fill="currentColor" d="M12 2C9.24 2 7 4.24 7 7v3H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V12c0-1.1-.9-2-2-2h-1V7c0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3v3H9V7c0-1.66 1.34-3 3-3z" />
        </svg><input type="password" id="rpassword" placeholder="Mín. 8 caracteres" class="w-full bg-transparent border-none outline-none text-sm text-white
                       placeholder:text-slate-500" autocomplete="new-password" required>
       </div>
      </div>
     </div>
     <p id="msg-reg" class="min-h-[1rem] text-xs text-errorText text-center font-medium"></p><button type="submit" class="w-full relative overflow-hidden group
                 bg-gradient-to-r from-bluePrimary to-bluePrimaryHover 
                 hover:from-bluePrimaryHover hover:to-bluePrimary
                 text-white font-semibold text-sm 
                 rounded-2xl px-6 py-4
                 transition-all duration-300 
                 shadow-lg shadow-bluePrimary/30 hover:shadow-bluePrimary/50
                 transform hover:scale-[1.02] active:scale-[0.98]
                 focus-visible:outline-none focus-visible:ring-2 
                 focus-visible:ring-bluePrimary focus-visible:ring-offset-2 
                 focus-visible:ring-offset-navyBg"> <span class="relative z-10 flex items-center justify-center gap-2"> Crear cuenta 
       <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-4 h-4"><path fill="currentColor" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
       </svg></span>
      <div class="absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 
                      translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"></div></button>
     <p class="text-center text-xs text-slate-400">¿Ya tienes cuenta? <a href="#" id="show-login" class="text-bluePrimary hover:text-bluePrimaryHover font-semibold ml-1 transition-colors"> Inicia sesión </a></p>
    </form><!-- Enlace para volver al inicio -->
    <footer class="pt-4 border-t border-white/10 text-center"><a href="" id="backToHome" class="inline-flex items-center gap-2 text-xs font-medium 
                 text-slate-400 hover:text-white
                 transition-colors group">
      <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-3.5 h-3.5 group-hover:-translate-x-1 transition-transform"><path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
      </svg> Volver al inicio </a>
    </footer>
   </main>
  </div>
  <script>
    // Referencias a elementos
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');
    const formTitle = document.getElementById('form-title');
    const showRegisterLink = document.getElementById('show-register');
    const showLoginLink = document.getElementById('show-login');
    const msg = document.getElementById('msg');
    const msgReg = document.getElementById('msg-reg');

    // Alternar entre login y registro
    showRegisterLink.addEventListener('click', (e) => {
      e.preventDefault();
      loginForm.classList.add('hidden');
      loginForm.classList.remove('flex');
      registerForm.classList.remove('hidden');
      registerForm.classList.add('flex');
      formTitle.textContent = 'Registrarse';
      msg.textContent = '';
    });

    showLoginLink.addEventListener('click', (e) => {
      e.preventDefault();
      registerForm.classList.add('hidden');
      registerForm.classList.remove('flex');
      loginForm.classList.remove('hidden');
      loginForm.classList.add('flex');
      formTitle.textContent = 'Iniciar Sesión';
      msgReg.textContent = '';
    });

    // Manejo del formulario de login
    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value.trim();
      msg.textContent = '';

      if (!email || !password) {
        msg.textContent = 'Completa todos los campos.';
        return;
      }

      try {
        const res = await fetch('/api/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password })
        });

        const data = await res.json();

        if (!data.ok) {
          msg.textContent = data.msg || 'Datos incorrectos.';
        } else {
          window.location.href = '/dashboard.html';
        }
      } catch (err) {
        msg.textContent = 'Error de conexión con el servidor.';
      }
    });

    // Manejo del formulario de registro
    registerForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const name = document.getElementById('rname').value.trim();
      const email = document.getElementById('remail').value.trim();
      const password = document.getElementById('rpassword').value.trim();
      msgReg.textContent = '';

      if (!name || !email || !password) {
        msgReg.textContent = 'Completa todos los campos.';
        return;
      }

      if (password.length < 8) {
        msgReg.textContent = 'La contraseña debe tener al menos 8 caracteres.';
        return;
      }

      try {
        const res = await fetch('/api/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, email, password })
        });

        const data = await res.json();

        if (!data.ok) {
          msgReg.textContent = data.msg || 'Error al registrar.';
        } else {
          msgReg.textContent = 'Registro exitoso. Redirigiendo...';
          msgReg.classList.remove('text-errorText');
          msgReg.classList.add('text-successText');
          setTimeout(() => {
            window.location.href = '/dashboard.html';
          }, 1500);
        }
      } catch (err) {
        msgReg.textContent = 'Error de conexión con el servidor.';
      }
    });

    document.getElementById("backToHome").href = "/index.html";
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a2be4e741698c3d',t:'MTc2Mzg1MDg2Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>