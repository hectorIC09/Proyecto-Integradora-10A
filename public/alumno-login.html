<!doctype html>
<html lang="es">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alumno | Campus Watch</title><!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .animate-float {
      animation: float 6s ease-in-out infinite;
    }

    .animate-fadeIn {
      animation: fadeIn 0.5s ease-out forwards;
    }

    .glass-effect {
      background: rgba(30, 41, 59, 0.7);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }

    .input-focus-effect:focus-within {
      background: rgba(51, 65, 85, 0.9);
      border-color: rgba(59, 130, 246, 0.7);
    }
  </style>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            inter: ['Inter', '-apple-system', 'BlinkMacSystemFont', 'system-ui', 'sans-serif'],
          },
          colors: {
            navyBg: '#0f172a',
            navyCard: '#1e293b',
            navyInput: '#334155',
            bluePrimary: '#3b82f6',
            bluePrimaryHover: '#2563eb',
            errorText: '#f87171',
            successText: '#34d399',
          }
        }
      }
    }
  </script>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="m-0 min-h-full h-full flex items-center justify-center bg-navyBg font-inter text-white overflow-hidden relative"><!-- Elementos decorativos de fondo -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
   <div class="absolute top-20 left-10 w-72 h-72 bg-bluePrimary/20 rounded-full blur-3xl animate-float"></div>
   <div class="absolute bottom-20 right-10 w-96 h-96 bg-bluePrimary/15 rounded-full blur-3xl animate-float" style="animation-delay: 2s;"></div>
   <div class="absolute top-1/2 left-1/2 w-80 h-80 bg-bluePrimary/10 rounded-full blur-3xl animate-float" style="animation-delay: 4s;"></div>
  </div>
  <div class="w-full h-full flex items-center justify-center px-4 py-6 relative z-10">
   <main class="w-full max-w-md glass-effect rounded-3xl shadow-2xl border border-white/10 
             px-8 py-10 flex flex-col gap-8 animate-fadeIn" aria-labelledby="form-title"><!-- Encabezado minimalista -->
    <header class="flex flex-col items-center gap-4"><!-- Logo minimalista con icono de estudiante -->
     <div class="relative">
      <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-bluePrimary to-bluePrimaryHover 
                      flex items-center justify-center shadow-lg shadow-bluePrimary/50 
                      transform transition-transform hover:scale-105">
       <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-8 h-8 text-white"><path fill="currentColor" d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z" />
       </svg>
      </div>
      <div class="absolute -inset-1 bg-gradient-to-br from-bluePrimary to-bluePrimaryHover rounded-2xl blur opacity-30 -z-10"></div>
     </div>
     <div class="text-center">
      <h1 id="form-title" class="text-2xl font-bold tracking-tight bg-gradient-to-r from-white to-slate-200 bg-clip-text text-transparent">Ingreso de Alumno</h1>
      <p class="mt-2 text-sm text-slate-400 font-light">Accede con tu <span class="font-semibold text-bluePrimary">matrícula institucional</span></p>
     </div>
    </header><!-- Formulario de Login -->
    <form id="login-form" class="flex flex-col gap-5">
     <div class="flex flex-col gap-4">
      <div class="text-left"><label for="email" class="block text-xs font-medium text-slate-300 mb-2 uppercase tracking-wider"> Correo Institucional </label>
       <div class="flex items-center gap-3 bg-white/5 rounded-2xl px-4 py-3.5 
                     border border-white/10 input-focus-effect
                     transition-all duration-300 hover:border-blue-400/50">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-5 h-5 text-slate-400"><path fill="currentColor" d="M4 4h16a2 2 0 0 1 2 2v1.2l-10 5.6-10-5.6V6a2 2 0 0 1 2-2zm-2 6.3V18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-7.7l-10 5.6-10-5.6z" />
        </svg><input type="email" id="email" placeholder="alumno@universidad.edu" class="w-full bg-transparent border-none outline-none text-sm text-white
                       placeholder:text-slate-500" autocomplete="email" required>
       </div>
      </div>
      <div class="text-left"><label for="matricula" class="block text-xs font-medium text-slate-300 mb-2 uppercase tracking-wider"> Matrícula </label>
       <div class="flex items-center gap-3 bg-white/5 rounded-2xl px-4 py-3.5 
                     border border-white/10 input-focus-effect
                     transition-all duration-300 hover:border-blue-400/50">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-5 h-5 text-slate-400"><path fill="currentColor" d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zM8 15h8v2H8v-2zm0-3h8v2H8v-2zm0-3h5v2H8V9z" />
        </svg><input type="text" id="matricula" placeholder="A00123456" class="w-full bg-transparent border-none outline-none text-sm text-white
                       placeholder:text-slate-500" autocomplete="off" required>
       </div>
      </div>
     </div>
     <p id="msg" class="min-h-[1rem] text-xs text-errorText text-center font-medium"></p><button type="submit" id="loginBtn" class="w-full relative overflow-hidden group
                 bg-gradient-to-r from-bluePrimary to-bluePrimaryHover 
                 hover:from-bluePrimaryHover hover:to-bluePrimary
                 text-white font-semibold text-sm 
                 rounded-2xl px-6 py-4
                 transition-all duration-300 
                 shadow-lg shadow-bluePrimary/30 hover:shadow-bluePrimary/50
                 transform hover:scale-[1.02] active:scale-[0.98]
                 focus-visible:outline-none focus-visible:ring-2 
                 focus-visible:ring-bluePrimary focus-visible:ring-offset-2 
                 focus-visible:ring-offset-navyBg"> <span class="relative z-10 flex items-center justify-center gap-2"> Ingresar 
       <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-4 h-4 group-hover:translate-x-1 transition-transform"><path fill="currentColor" d="M13 4v4h-2V6H5v12h6v-2h2v4H3V4h10zm8 8-5 5v-3h-6v-4h6V7l5 5z" />
       </svg></span>
      <div class="absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 
                      translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"></div></button>
     <div class="flex flex-col gap-3 text-center">
      <div class="relative">
       <div class="absolute inset-0 flex items-center">
        <div class="w-full border-t border-white/10"></div>
       </div>
       <div class="relative flex justify-center text-xs"><span class="px-3 bg-transparent text-slate-500">¿No eres alumno?</span>
       </div>
      </div><a href="login.html" class="inline-flex items-center justify-center gap-2 
                    text-xs font-medium text-slate-300 hover:text-white
                    bg-white/5 hover:bg-white/10 
                    border border-white/10 hover:border-white/20
                    rounded-xl px-4 py-3
                    transition-all duration-300">
       <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-4 h-4"><path fill="currentColor" d="M12 2 4 5v6c0 5 3.4 9.4 8 11 4.6-1.6 8-6 8-11V5l-8-3z" />
       </svg> Acceso administrativo </a>
     </div>
    </form><!-- Enlace para volver al inicio -->
    <footer class="pt-4 border-t border-white/10 text-center"><a href="" id="backToHome" class="inline-flex items-center gap-2 text-xs font-medium 
                 text-slate-400 hover:text-white
                 transition-colors group">
      <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" aria-hidden="true" class="w-3.5 h-3.5 group-hover:-translate-x-1 transition-transform"><path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
      </svg> Volver al inicio </a>
    </footer>
   </main>
  </div>
  <script>
    const loginForm = document.getElementById('login-form');
    const msg = document.getElementById('msg');

    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();

      const emailValue = document.getElementById("email").value.trim();
      const matriculaValue = document.getElementById("matricula").value.trim();
      msg.textContent = '';

      if (!emailValue || !matriculaValue) {
        msg.textContent = "Completa ambos campos.";
        return;
      }

      try {
        const res = await fetch("/api/alumnos/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email: emailValue, matricula: matriculaValue })
        });

        const data = await res.json();

        if (!data.ok) {
          msg.textContent = data.msg || "Datos incorrectos.";
        } else {
          window.location.href = "/alumno-dashboard.html";
        }

      } catch (err) {
        msg.textContent = "Error de conexión con el servidor.";
      }
    });

     document.getElementById("backToHome").href = "/login.html";
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a2bef2335f48c3d',t:'MTc2Mzg1MTI4NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>